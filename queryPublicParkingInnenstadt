/*
PUBLIC PARKING IN BADEN
*/

[out:json][timeout:25];

// Search Area
{{geocodeArea:Baden (Switzerland)}}->.Baden;
(
  {{geocodeArea:Baden (Switzerland)}};
  {{geocodeArea:Wettingen)}};
  )->.BadenWettingen;


// 1) Publicly accessible street parking (operated by city of Baden)
nwr["amenity"="parking"]["access"="yes"]["parking"~"^(street_side|lane|on_kerb|half_on_kerb)$"](poly:"47.48179300639731 8.299630304084133 47.47916738499828 8.296891079667233 47.47535054212466 8.300419086237724 47.47347729934813 8.303406371866544 47.472558513597335 8.300809663667224 47.47034285679311 8.29967979663968 47.46921880704278 8.300115558844283 47.46997972084384 8.303078695625175 47.469129782023515 8.305073582089307 47.46779511985105 8.306153899726723 47.465891147611586 8.305740278904096 47.46564688892116 8.308528154015846 47.46483342403755 8.31125509037156 47.46709032266392 8.313084769884199 47.467609275185 8.312070751183228 47.46814331631552 8.312026253800695 47.46956630370639 8.313809083094924 47.46891657144067 8.31492763033441 47.470384845674914 8.316226594879453 47.47014091411427 8.316811927983224 47.47323749297783 8.319388792577342 47.47418547556336 8.314411058272384 47.47333123257977 8.310492940091848 47.47569871256465 8.309780970497286 47.479876782864494 8.314175189585796 47.48104643411045 8.31491163948536 47.482141403166736 8.313733319646843 47.482539568074486 8.301287316357502");
out geom;

make stats streetParking=sum(is_tag("capacity") ? number(t["capacity"]) : 0);
out;

// 2) Surface parkings operated by city of Baden
// Note: Parking Schwimmbad is located in Wettingen

(
  nwr["amenity"="parking"]["access"="yes"]
  ["parking"="surface"]["operator"="Stadt Baden"](poly:"47.48179300639731 8.299630304084133 47.47916738499828 8.296891079667233 47.47535054212466 8.300419086237724 47.47347729934813 8.303406371866544 47.472558513597335 8.300809663667224 47.47034285679311 8.29967979663968 47.46921880704278 8.300115558844283 47.46997972084384 8.303078695625175 47.469129782023515 8.305073582089307 47.46779511985105 8.306153899726723 47.465891147611586 8.305740278904096 47.46564688892116 8.308528154015846 47.46483342403755 8.31125509037156 47.46709032266392 8.313084769884199 47.467609275185 8.312070751183228 47.46814331631552 8.312026253800695 47.46956630370639 8.313809083094924 47.46891657144067 8.31492763033441 47.470384845674914 8.316226594879453 47.47014091411427 8.316811927983224 47.47323749297783 8.319388792577342 47.47418547556336 8.314411058272384 47.47333123257977 8.310492940091848 47.47569871256465 8.309780970497286 47.479876782864494 8.314175189585796 47.48104643411045 8.31491163948536 47.482141403166736 8.313733319646843 47.482539568074486 8.301287316357502");
);
out geom;

make stats surfaceParking=sum(is_tag("capacity") ? number(t["capacity"]) : 0);
out;

// 3.1) Garages ("Parkhäuser") operated by city of Baden
// Garages can be maped with amenity=parking_entrance and/or amenity=parking. To avoid doublecounting, only items with a name are shown.
nwr["amenity"~"^(parking|parking_entrance)$"]["access"="yes"]["name"~"."]["parking"~"^(multi-storey|underground|rooftop)$"]["operator"="Stadt Baden"](poly:"47.48179300639731 8.299630304084133 47.47916738499828 8.296891079667233 47.47535054212466 8.300419086237724 47.47347729934813 8.303406371866544 47.472558513597335 8.300809663667224 47.47034285679311 8.29967979663968 47.46921880704278 8.300115558844283 47.46997972084384 8.303078695625175 47.469129782023515 8.305073582089307 47.46779511985105 8.306153899726723 47.465891147611586 8.305740278904096 47.46564688892116 8.308528154015846 47.46483342403755 8.31125509037156 47.46709032266392 8.313084769884199 47.467609275185 8.312070751183228 47.46814331631552 8.312026253800695 47.46956630370639 8.313809083094924 47.46891657144067 8.31492763033441 47.470384845674914 8.316226594879453 47.47014091411427 8.316811927983224 47.47323749297783 8.319388792577342 47.47418547556336 8.314411058272384 47.47333123257977 8.310492940091848 47.47569871256465 8.309780970497286 47.479876782864494 8.314175189585796 47.48104643411045 8.31491163948536 47.482141403166736 8.313733319646843 47.482539568074486 8.301287316357502");

out geom;
make stats garageParkingCity=sum(is_tag("capacity") ? number(t["capacity"]) : 0);
out;

// 3.2) Garages ("Parkhäuser") operated by Parkhaus Ländli AG and Grand Casino Baden AG
// Garages can be maped with amenity=parking_entrance and/or amenity=parking. To avoid doublecounting, only items with a name are shown.
 nwr["amenity"~"^(parking|parking_entrance)$"]["access"="yes"]["name"~"."]["parking"~"^(multi-storey|underground|rooftop)$"]["operator"~"^(Parkhaus Ländli AG|Grand Casino Baden AG)$"](poly:"47.48179300639731 8.299630304084133 47.47916738499828 8.296891079667233 47.47535054212466 8.300419086237724 47.47347729934813 8.303406371866544 47.472558513597335 8.300809663667224 47.47034285679311 8.29967979663968 47.46921880704278 8.300115558844283 47.46997972084384 8.303078695625175 47.469129782023515 8.305073582089307 47.46779511985105 8.306153899726723 47.465891147611586 8.305740278904096 47.46564688892116 8.308528154015846 47.46483342403755 8.31125509037156 47.46709032266392 8.313084769884199 47.467609275185 8.312070751183228 47.46814331631552 8.312026253800695 47.46956630370639 8.313809083094924 47.46891657144067 8.31492763033441 47.470384845674914 8.316226594879453 47.47014091411427 8.316811927983224 47.47323749297783 8.319388792577342 47.47418547556336 8.314411058272384 47.47333123257977 8.310492940091848 47.47569871256465 8.309780970497286 47.479876782864494 8.314175189585796 47.48104643411045 8.31491163948536 47.482141403166736 8.313733319646843 47.482539568074486 8.301287316357502");

out geom;
make stats garageParkingLaendliCasino=sum(is_tag("capacity") ? number(t["capacity"]) : 0);
out;


// 4) Public parking (surface or garages) operated by privates
  
    nwr["amenity"~"^(parking|parking_entrance)$"]["access"="yes"]["parking"~"^(surface|multi-storey|underground|rooftop)$"]["operator:type"!="government"]["operator:type"]["operator"!="Parkhaus Ländli AG"]["operator"!="Grand Casino Baden AG"](poly:"47.48179300639731 8.299630304084133 47.47916738499828 8.296891079667233 47.47535054212466 8.300419086237724 47.47347729934813 8.303406371866544 47.472558513597335 8.300809663667224 47.47034285679311 8.29967979663968 47.46921880704278 8.300115558844283 47.46997972084384 8.303078695625175 47.469129782023515 8.305073582089307 47.46779511985105 8.306153899726723 47.465891147611586 8.305740278904096 47.46564688892116 8.308528154015846 47.46483342403755 8.31125509037156 47.46709032266392 8.313084769884199 47.467609275185 8.312070751183228 47.46814331631552 8.312026253800695 47.46956630370639 8.313809083094924 47.46891657144067 8.31492763033441 47.470384845674914 8.316226594879453 47.47014091411427 8.316811927983224 47.47323749297783 8.319388792577342 47.47418547556336 8.314411058272384 47.47333123257977 8.310492940091848 47.47569871256465 8.309780970497286 47.479876782864494 8.314175189585796 47.48104643411045 8.31491163948536 47.482141403166736 8.313733319646843 47.482539568074486 8.301287316357502");
out geom;
make stats publicParkingByPrivate=sum(is_tag("capacity") ? number(t["capacity"]) : 0);
out;

// MAP STYLE

{{style:

*[parking=lane]
{ color: steelblue; fill-color:steelblue; }
*[parking=street_side]
{ color: steelblue; fill-color:steelblue; }
*[parking=on_kerb]
{ color: steelblue; fill-color:steelblue; }
*[parking=half_on_kerb]
{ color: steelblue; fill-color:steelblue; }

*[parking=surface]
{ color: #6646b4; fill-color:#6646b4; }

*[parking=multi-storey]
{ color: #b446a7; fill-color:#b446a7 }
*[parking=underground]
{ color: #b446a7; fill-color:#b446a7; }
*[parking=rooftop]
{ color: #b446a7; fill-color:#b446a7; }

*[operator=Parkhaus Ländli AG]
{ color: #b446a7; fill-color:#b446a7; dashes:1,3;}
*[operator=Grand Casino Baden AG]
{ color: #b446a7; fill-color:#b446a7; dashes:1,3;}

*[operator:type][operator!=Stadt Baden][operator!=Parkhaus Ländli AG][operator!=Grand Casino Baden AG]
{ color: red; fill-color:red;}
{text: eval("tag('name')");}

*[capacity>25]
{text: eval("tag('name') . ' (' . tag('capacity') . ')'");}


}}

// Best use with Tile Server: http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png
